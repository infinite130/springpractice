-- 공지사항
CREATE TABLE NOTICE (
    NOTICE_CODE NUMBER GENERATED AS IDENTITY (start with 1) PRIMARY KEY NOT NULL,
    MEM_CODE INT NOT NULL,
    CATEGORY_CODE INT NOT NULL,
    NOTICE_TITLE VARCHAR2(255),
    NOTICE_BODY CLOB,
    NOTICE_ENROLL_DATE DATE DEFAULT SYSDATE NOT NULL,
    NOTICE_MODIFY_DATE DATE DEFAULT SYSDATE NULL,
    NOTICE_LIKE INT,
    NOTICE_STATUS INT,
    NOTICE_COUNT INT,
    FOREIGN KEY (MEM_CODE) REFERENCES TB_MEMBER(MEM_CODE),
    FOREIGN KEY (CATEGORY_CODE) REFERENCES BOARD_CATEGORY(CATEGORY_CODE)    
);

-- 생활안전
CREATE TABLE SAFTY(
    SAFTY_CODE NUMBER GENERATED AS IDENTITY (start with 1) PRIMARY KEY NOT NULL,
    CATEGORY_CODE INT NOT NULL,
    MEM_CODE INT NOT NULL,
    SAFTY_TITLE VARCHAR2(255),
    SAFTY_BODY CLOB,
    SAFTY_ENROLL_DATE DATE DEFAULT SYSDATE NOT NULL,
    SAFTY_MODIFY_DATE DATE DEFAULT SYSDATE NULL,
    SAFTY_STATUS INT,
    SAFTY_LIKE INT,
    SAFTY_COUNT INT,
    FOREIGN KEY (MEM_CODE) REFERENCES TB_MEMBER(MEM_CODE),
    FOREIGN KEY (CATEGORY_CODE) REFERENCES BOARD_CATEGORY(CATEGORY_CODE)
);

-- 파일 업로드 테이블
CREATE TABLE FILE_UP (
    FILE_CODE NUMBER GENERATED AS IDENTITY (start with 1) PRIMARY KEY NOT NULL,
    NOTICE_CODE NUMBER NULL,
    SAFTY_CODE NUMBER NULL,
    FILE_NAME VARCHAR2(255) NOT NULL, -- 파일 이름
    FILE_PATH VARCHAR2(255) NOT NULL, -- 파일 경로
    FILE_TYPE VARCHAR2(50) NOT NULL CHECK (FILE_TYPE IN ('NOTICE', 'SAFTY')), -- 파일 타입 ('NOTICE' 또는 'SAFTY')
    FOREIGN KEY (NOTICE_CODE) REFERENCES NOTICE(NOTICE_CODE),
    FOREIGN KEY (SAFTY_CODE) REFERENCES SAFTY_BOARD(SAFTY_CODE)
);

-- 생활안전, 공지사항 게시물 카테고리
CREATE TABLE BOARD_CATEGORY (
    CATEGORY_CODE INT PRIMARY KEY NOT NULL,
    CATEGORY_NAME VARCHAR2(50),
    STATUS INT
);
COMMIT;
