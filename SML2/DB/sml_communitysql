//Ä¿¹Â´ÏÆ¼ °Ô½ÃÆÇ
DROP TABLE COMMUNITY;
CREATE TABLE COMMUNITY (
    COMM_CODE NUMBER GENERATED ALWAYS AS IDENTITY(START WITH 1) PRIMARY KEY NOT NULL,
    COMM_TITLE VARCHAR2(30) NOT NULL,
    COMM_WRITER VARCHAR2(30),
    COMM_CONTENT CLOB,
    COMM_ENROLL_DATE DATE DEFAULT SYSDATE NOT NULL,
    COMM_MODIFY_DATE DATE DEFAULT NULL,
    COMM_POINT NUMBER DEFAULT 0 NOT NULL,
    COMM_SECRET VARCHAR2(1) DEFAULT 'N' NOT NULL,
    COMM_PASSWORD NUMBER(4),
    COMM_COUNT NUMBER DEFAULT 0,
    COMM_STATUS VARCHAR2(1) DEFAULT 'N' NOT NULL,
    MEM_CODE NUMBER NOT NULL,
    FOREIGN KEY (MEM_CODE) REFERENCES TB_MEMBER (MEM_CODE)
);
SELECT * FROM COMMUNITY;

//Ä¿¹Â´ÏÆ¼ ´ñ±Û
DROP TABLE COMMUNITY_REPLY;
CREATE TABLE COMMUNITY_REPLY (
    REP_CODE NUMBER GENERATED ALWAYS AS IDENTITY(START WITH 1) PRIMARY KEY NOT NULL,
    COMM_CODE NUMBER NOT NULL,
    REP_CONTENT VARCHAR2(255),
    REP_ENROLL_DATE DATE DEFAULT SYSDATE NOT NULL,
    REP_MODIFY_DATE DATE DEFAULT NULL,
    REP_STATUS VARCHAR2(1) DEFAULT 'N' NOT NULL,
    MEM_CODE NUMBER NOT NULL,
    FOREIGN KEY (COMM_CODE) REFERENCES COMMUNITY (COMM_CODE),
    FOREIGN KEY (MEM_CODE) REFERENCES TB_MEMBER (MEM_CODE)
);
SELECT * FROM COMMUNITY_REPLY;

//Ä¿¹Â´ÏÆ¼ ÁÁ¾Æ¿ä
DROP TABLE COMMUNITY_LIKE;
CREATE TABLE COMMUNITY_LIKE (
    LIKE_CODE NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    MEM_CODE NUMBER NOT NULL,
    COMM_CODE NUMBER NOT NULL,
    FOREIGN KEY (MEM_CODE) REFERENCES TB_MEMBER (MEM_CODE) ON DELETE CASCADE,
    FOREIGN KEY (COMM_CODE) REFERENCES COMMUNITY (COMM_CODE) ON DELETE CASCADE
);

COMMIT;

