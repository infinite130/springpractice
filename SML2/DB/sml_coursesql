-- 강사
DROP TABLE COURSE_TEACHER;
CREATE TABLE COURSE_TEACHER (
    TEA_CODE NUMBER GENERATED AS IDENTITY (START WITH 1) PRIMARY KEY,
    TEA_NAME VARCHAR2(30),
    TEA_INTRO VARCHAR2(255)
);
SELECT * FROM COURSE_TEACHER;

-- 수업카테고리
DROP TABLE COURSE_CATEGORY;
CREATE TABLE COURSE_CATEGORY (
    CCAT_TIER NUMBER(1) NOT NULL,
    CCAT_NAME VARCHAR2(30) NOT NULL,
    CCAT_CODE VARCHAR2(30) PRIMARY KEY,
    CCAT_PARENT VARCHAR2(30),
    FOREIGN KEY (CCAT_PARENT) REFERENCES COURSE_CATEGORY(CCAT_CODE)
);
SELECT * FROM COURSE_CATEGORY ORDER BY CCAT_CODE ASC;

-- 수강신청
DROP TABLE COURSE;
CREATE TABLE COURSE (
    COURSE_CODE INT GENERATED AS IDENTITY(START WITH 1) PRIMARY KEY NOT NULL,
    CCAT_CODE VARCHAR2(30),
    COURSE_NAME VARCHAR2(30) NOT NULL,
    COURSE_CONTENT VARCHAR2(255),
    COURSE_LIMIT INT NOT NULL,
    COURSE_START_DATE DATE,
    COURSE_END_DATE DATE,
    TEA_CODE VARCHAR2(30),
    COURSE_ENROLL_DATE DATE DEFAULT SYSDATE NOT NULL,
    COURSE_MODIFY_DATE DATE DEFAULT NULL,
    COURSE_POINT INT DEFAULT 0 NOT NULL,
    COURSE_STATUS VARCHAR2(1) DEFAULT 'N' NOT NULL,
    COURSE_START_TIME TIMESTAMP,  -- DATE 대신 TIMESTAMP 사용
    COURSE_END_TIME TIMESTAMP,    -- DATE 대신 TIMESTAMP 사용
    COURSE_DAY VARCHAR2(255) NOT NULL
);
SELECT * FROM COURSE;

-- 수강신청리스트 - 회원
CREATE TABLE COURSE_APPLYCANT (
    APPLY_CODE INT GENERATED AS IDENTITY(START WITH 1) PRIMARY KEY NOT NULL,
    APPLY_DATE DATE NOT NULL,
    MEM_CODE INT NOT NULL,
    COURSE_CODE INT NOT NULL,
    FOREIGN KEY (MEM_CODE) REFERENCES TB_MEMBER (MEM_CODE),
    FOREIGN KEY (COURSE_CODE) REFERENCES COURSE (COURSE_CODE)
);

COMMIT;
