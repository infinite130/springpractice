-- 강사
DROP TABLE COURSE_TEACHER;
CREATE TABLE COURSE_TEACHER (
    TEA_CODE NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1) PRIMARY KEY,
    TEA_NAME VARCHAR2(30),
    TEA_INTRO VARCHAR2(255),
    TEA_STATUS VARCHAR2(1) DEFAULT 'N' NOT NULL
);
ALTER TABLE COURSE_TEACHER ADD TEA_ENROLL_DATE DATE DEFAULT SYSDATE NOT NULL;
ALTER TABLE COURSE_TEACHER ADD TEA_MODIFY_DATE DATE DEFAULT NULL;
SELECT * FROM COURSE_TEACHER WHERE TEA_CODE = 257;
SELECT * FROM COURSE_TEACHER ORDER BY TEA_CODE ASC;
SELECT * FROM USER_INDEXES WHERE TABLE_NAME = 'COURSE_TEACHER';

-- 수업카테고리
DROP TABLE COURSE_CATEGORY;
CREATE TABLE COURSE_CATEGORY (
    CCAT_TIER NUMBER(1) NOT NULL,
    CCAT_NAME VARCHAR2(30) NOT NULL,
    CCAT_CODE VARCHAR2(30) PRIMARY KEY,
    CCAT_PARENT VARCHAR2(30),
    FOREIGN KEY (CCAT_PARENT) REFERENCES COURSE_CATEGORY(CCAT_CODE)
);
SELECT * FROM COURSE_CATEGORY ORDER BY CCAT_CODE ASC;

-- 수강신청
DROP TABLE COURSE;
CREATE TABLE COURSE (
    COURSE_CODE NUMBER GENERATED ALWAYS AS IDENTITY(START WITH 1) PRIMARY KEY NOT NULL,
    CCAT_CODE VARCHAR2(30),
    COURSE_NAME VARCHAR2(30) NOT NULL,
    COURSE_CONTENT VARCHAR2(255),
    COURSE_LIMIT NUMBER NOT NULL,
    COURSE_START_DATE DATE,
    COURSE_END_DATE DATE,
    TEA_CODE NUMBER,
    COURSE_ENROLL_DATE DATE DEFAULT SYSDATE NOT NULL,
    COURSE_MODIFY_DATE DATE DEFAULT NULL,
    COURSE_POINT NUMBER DEFAULT 0 NOT NULL,
    COURSE_STATUS VARCHAR2(1) DEFAULT 'N' NOT NULL,
    COURSE_START_TIME TIMESTAMP,  
    COURSE_END_TIME TIMESTAMP,    
    COURSE_DAY VARCHAR2(255) NOT NULL,
    FOREIGN KEY (TEA_CODE) REFERENCES COURSE_TEACHER(TEA_CODE),
    FOREIGN KEY (CCAT_CODE) REFERENCES COURSE_CATEGORY(CCAT_CODE)
);
ALTER TABLE COURSE
MODIFY COURSE_NAME VARCHAR2(255);

SELECT * FROM COURSE;

-- 수강신청리스트 - 회원
DROP TABLE COURSE_APPLICANT;
CREATE TABLE COURSE_APPLICANT (
    APPLY_CODE NUMBER GENERATED ALWAYS AS IDENTITY(START WITH 1) PRIMARY KEY NOT NULL,
    APPLY_DATE DATE DEFAULT SYSDATE NOT NULL,
    MEM_CODE NUMBER NOT NULL,
    COURSE_CODE NUMBER NOT NULL,
    FOREIGN KEY (MEM_CODE) REFERENCES TB_MEMBER (MEM_CODE),
    FOREIGN KEY (COURSE_CODE) REFERENCES COURSE (COURSE_CODE)
);
ALTER TABLE COURSE_APPLICANT ADD APPLY_CANCEL_DATE DATE DEFAULT NULL;
ALTER TABLE COURSE_APPLICANT ADD APPLY_STATUS VARCHAR2(1) DEFAULT 'N' NOT NULL;
SELECT * FROM COURSE_APPLICANT;

COMMIT;
